language: go
go:
- 1.x
sudo: false
before_script:
- go vet ./...
- go test -race ./...
script:
- go build -i -race -o bin/ephemeral-roles ephemeral-roles.go
before_deploy:
- zip -r ephemeral-roles.zip .
deploy:
  provider: elasticbeanstalk
  skip_cleanup: true
  region: us-east-1
  access_key_id: "AKIAITOP2BVV6ICBAOYQ"
  secret_access_key:
    secure: "CR7WlLyeZq2jBgRnABJZqkVlAJFfMN0M5r3R6iMFCPwc7rCQHm8GF8bnRv/UE1IewrzEa1Jhn7R9f/zGqUxjqOY4/OGG2SW5dHzUPTzBOUUlaRVntVc7ERsU0VsfPRntO1gwoaUqreAwJ8LarKBi9b2BeUbK3l78PS/LUzqyzaH9K6CPiAOBZWPXItuo926m3li/skS1+HV0nR2Ii7NOdq4QJnVqx8tt5vkSCPBXWgLTPxAFDEChOoy/kY/pdl62K83o5zpHnjvS/dyI44eWagWXqoDVnyqSDqznNJbewzOIsSLGVFvWAZfiS9W+9Rr0VzfFxXVeD0QuTbsKsBv/uF3iLsjharLPd6Fwt+c4u1FbBmEQhJsJnKLWzZxj4kp58n4nEWQOclkKB+8kmFIhsrn3IoETB0/V2r+0mtWbYmf5A6qMtNNEImQEkPLefsEu97VRqXNWpsG+FvhULaiaPQrn63WNOszy0AfHRN1K9UZBaQTyQQbKJGDIOBJa7iAsyRLiWwz+/9o8xk8a6opqHOEJILDHQLsJh8ItJzLEtGmWGnpYQeBlWSfNi+726W5EOF33M+AIy9D2ZNhDRGJcQrbHY0bvFYtok4svR6y/05+VrfVzRF3IwuOleqvSkLQLtJPO5kdNuMLWzNKGbdalqQbfe5PCLnnuxtkX+HD0Bkc="
  zip_file: ephemeral-roles.zip
  app: ephemeral-roles
  env: ephemeral-roles
  bucketname: ephemeral-roles
  wait-until-deployed: true
  on:
    repo: ewohltman/ephemeral-roles
    all_branches: true